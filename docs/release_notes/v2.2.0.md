# Release Notes v2.2.0 - Profiler Tooltips & Optimization

**Date:** December 13, 2025
**Tag:** `v2.2.0-profiler-tooltips`

## üöÄ Key Features

### 1. Standardized Chart Tooltips
A new reusable tooltip system has been implemented across the Profiler dashboard to ensure consistency in design and behavior.

*   **New Components**: `ChartTooltipFrame`, `ChartTooltipHeader`, `ChartTooltipRow`.
*   **Applied to**:
    *   `daily-levels.tsx`: Level touch stats.
    *   `hod-lod-analysis.tsx`: High/Low of Day histograms.
    *   `range-distribution.tsx`: Daily range distribution charts.
    *   `outcome-panel.tsx`: Session outcome scatter plots and histograms.
    *   `time-histograms.tsx`: False move and session break timing charts.
    *   `reference-view.tsx`: Reference data visualizations.
*   **Design**: Unified "Glassmorphism" look with consistent typography and color indicators.

### 2. API Optimization
The Level Touches API (`/stats/level-touches`) has been significantly optimized to reduce payload size and improve frontend performance.

*   **Pre-Aggregation**: The backend now pre-calculates the "First Hit" per session group (Asia, London, NY1, NY2, etc.) instead of sending raw array data for every single touch.
*   **Payload Reduction**: The frontend receives a much smaller `hits` map (e.g., `{"NY1": "09:35"}`) instead of thousands of timestamps.
*   **Frontend Logic**: `LevelCard` component updated to use this optimized data structure, removing client-side filtering logic (`isInRange`).

## üßπ Code Cleanup
*   Removed unused `ReferenceData` legacy code from `RangeDistribution`.
*   Removed redundant helper functions (`isInRange`, `bucketHits`) from `daily-levels.tsx`.
*   Fixed TypeScript import errors in `range-distribution.tsx` and `outcome-panel.tsx`.

## üêõ Bug Fixes
*   Fixed "Low Distribution" tooltip header incorrectly displaying "High Distribution" in `range-distribution.tsx`.
*   Resolved "Cannot find name" errors for tooltip components.

## üìù Documentation
*   Updated `task.md` to reflect completion of standardization tasks.
*   Updated `daily_profiler_requirements.md` implementation status.
